<VirtualHost _default_:80>
  ServerName rustbeltrebellion.com
  ServerAlias www.rustbeltrebellion.com

  ServerAdmin default-web@rustbeltrebellion.com
  DocumentRoot /var/www/http

  ErrorLog /var/www/logs/error.log
  CustomLog /var/www/logs/access.log combined


        #   Configure Apache to Advertise Trying SSL First

        Header always set Strict-Transport-Security "max-age=63072000; includeSubdomains; preload"


        #   Do Not Permit Embedding In an iframe Tag


        #   See SAMEORIGIN or ALLOW-FROM Documentation for More Relaxed X-Frame Usage

        Header always set X-Frame-Options DENY


        #   Set Server Level XSS Prevention

        Header set X-XSS-Protection: "1; mode=block"


        #   Remove Poorly Performing etag Cache Invalidation Header

        Header unset ETag


        #   Prevent MIME sniffing a non-declared content type

        Header set X-Content-Type-Options: nosniff


        #   Allow Running Scripts from Self and Third-Party Resources from Google

        Header set X-WebKit-CSP: "default-src 'self';script-src 'self' www.google-analytics.com ajax.googleapis.com;"

        Header set X-Content-Security-Policy: "default-src 'self';script-src 'self' www.google-analytics.com ajax.googleapis.com;"

        Header set Content-Security-Policy: "default-src 'self';script-src 'self' www.google-analytics.com ajax.googleapis.com;"


        #   Used by Adobe PDF & Flash -- Don't Use Flash

        Header set X-Permitted-Cross-Domain-Policies: master-only

  <FilesMatch "\.php$">
    SetHandler "proxy:unix:///var/www/sockets/rustbeltrebellion.com.sock|fcgi://rustbeltrebellion.com"
  </FilesMatch>

  <Proxy fcgi://rustbeltrebellion.com>
    ProxySet connectiontimeout=5 timeout=240
  </Proxy>

</VirtualHost>
